<!DOCTYPE html><html lang="en"><head><title>Matrix/References</title></head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"><meta name="groc-relative-root" content="../"><meta name="groc-document-path" content="Matrix/References"><meta name="groc-project-path" content="js/src/Matrix/References.js"><meta name="groc-github-url" content="https://github.com/aureooms/js-adjacency-matrix"><link rel="stylesheet" type="text/css" media="all" href="../assets/style.css"><script type="text/javascript" src="../assets/behavior.js"></script><body><div id="meta"><div class="file-path"><a href="https://github.com/aureooms/js-adjacency-matrix/blob/master/js/src/Matrix/References.js">js/src/Matrix/References.js</a></div></div><div id="document"><div class="segment"><div class="code"><div class="wrapper"><span class="hljs-keyword">const</span> References = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> </span>) </span>{

	<span class="hljs-keyword">this</span>.v = [ ] ;
	<span class="hljs-keyword">this</span>.e = [ ] ;

} ;</div></div></div><div class="segment"><div class="comments doc-section"><div class="wrapper"><p>O(n²), amortized O(n)</p>
<p>Parameters:</p>
<ul>
<li><strong>label must be a label.</strong><br/>(a label for the vertex to add)</li>
</ul>
<p><strong>Returns a vertex</strong><br/>(a vertex reference)</p></div></div><div class="code"><div class="wrapper">References.prototype.vadd = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> label </span>) </span>{

	<span class="hljs-keyword">const</span> len = <span class="hljs-keyword">this</span>.e.length ;
	<span class="hljs-keyword">const</span> ref = [ len , label ] ;</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>add a vertex</p></div></div><div class="code"><div class="wrapper">	<span class="hljs-keyword">this</span>.v.push( ref ) ;</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>add a row</p></div></div><div class="code"><div class="wrapper">	<span class="hljs-keyword">this</span>.e.push( [ <span class="hljs-keyword">for</span> ( v <span class="hljs-keyword">of</span> <span class="hljs-keyword">this</span>.v ) [ <span class="hljs-literal">null</span> , <span class="hljs-literal">null</span> , -<span class="hljs-number">1</span> ] ] ) ;</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>add a column (undirected graph:(i,j) = (j,i))</p></div></div><div class="code"><div class="wrapper">	<span class="hljs-keyword">for</span> ( <span class="hljs-keyword">let</span> j = <span class="hljs-number">0</span> ; j &lt; len ; ++j ) <span class="hljs-keyword">this</span>.e[j].push( <span class="hljs-keyword">this</span>.e[len][j] ) ;

	<span class="hljs-keyword">return</span> ref ;

} ;</div></div></div><div class="segment"><div class="comments doc-section"><div class="wrapper"><p>O(n²), amortized O(n)
Fast if removing vertices in LIFO order.</p>
<p>Parameters:</p>
<ul>
<li><strong>v must be a vertex.</strong><br/>(is a vertex reference)</li>
</ul></div></div><div class="code"><div class="wrapper">References.prototype.vdel = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> v </span>) </span>{</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>id to delete</p></div></div><div class="code"><div class="wrapper">	<span class="hljs-keyword">const</span> i = v[<span class="hljs-number">0</span>] ;

	<span class="hljs-keyword">const</span> len = <span class="hljs-keyword">this</span>.v.length ;</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>last id</p></div></div><div class="code"><div class="wrapper">	<span class="hljs-keyword">const</span> j = len - <span class="hljs-number">1</span> ;

	<span class="hljs-keyword">if</span> ( i &lt; j ) {</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>swap deleted row and column
with last row and column</p></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>move vertex reference</p></div></div><div class="code"><div class="wrapper">		<span class="hljs-keyword">this</span>.v[i] = <span class="hljs-keyword">this</span>.v[j] ;</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>change vertex id</p></div></div><div class="code"><div class="wrapper">		<span class="hljs-keyword">this</span>.v[i][<span class="hljs-number">0</span>] = i ;</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>move column</p></div></div><div class="code"><div class="wrapper">		<span class="hljs-keyword">for</span> ( <span class="hljs-keyword">let</span> k = <span class="hljs-number">0</span> ; k &lt; i ; ++k ) <span class="hljs-keyword">this</span>.e[k][i] = <span class="hljs-keyword">this</span>.e[ k ][j] ;
		<span class="hljs-keyword">for</span> ( <span class="hljs-keyword">let</span> k = i ; k &lt; j ; ++k ) <span class="hljs-keyword">this</span>.e[k][i] = <span class="hljs-keyword">this</span>.e[k+<span class="hljs-number">1</span>][j] ;</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>move row</p></div></div><div class="code"><div class="wrapper">		<span class="hljs-keyword">for</span> ( <span class="hljs-keyword">let</span> k = <span class="hljs-number">0</span> ; k &lt; i ; ++k ) <span class="hljs-keyword">this</span>.e[i][k] = <span class="hljs-keyword">this</span>.e[j][k] ;
		<span class="hljs-keyword">for</span> ( <span class="hljs-keyword">let</span> k = i ; k &lt; j ; ++k ) <span class="hljs-keyword">this</span>.e[i][k] = <span class="hljs-keyword">this</span>.e[j][k+<span class="hljs-number">1</span>] ;

	}</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>remove last vertex</p></div></div><div class="code"><div class="wrapper">	<span class="hljs-keyword">this</span>.v.splice( j , <span class="hljs-number">1</span> ) ;</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>remove last row</p></div></div><div class="code"><div class="wrapper">	<span class="hljs-keyword">this</span>.e.splice( j , <span class="hljs-number">1</span> ) ;</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>remove last column
NB : after removing row k &lt; len - 1 = j</p></div></div><div class="code"><div class="wrapper">	<span class="hljs-keyword">for</span> ( <span class="hljs-keyword">let</span> k = <span class="hljs-number">0</span> ; k &lt; j ; ++k ) <span class="hljs-keyword">this</span>.e[k].splice( j , <span class="hljs-number">1</span> ) ;

} ;</div></div></div><div class="segment"><div class="comments doc-section"><div class="wrapper"><p>O(1)</p>
<p>Parameters:</p>
<ul>
<li><p><strong>u must be a vertex.</strong><br/>(is a vertex reference)</p>
</li>
<li><p><strong>v must be a vertex.</strong><br/>(is a vertex reference)</p>
</li>
<li><p><strong>w must be a weight.</strong></p>
</li>
</ul>
<p><strong>Returns an edge</strong><br/>(an edge reference)</p></div></div><div class="code"><div class="wrapper">References.prototype.eadd = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> u , v , w </span>) </span>{

	<span class="hljs-keyword">const</span> i = u[<span class="hljs-number">0</span>] , j = v[<span class="hljs-number">0</span>] ;

	<span class="hljs-keyword">this</span>.e[i][j][<span class="hljs-number">0</span>] = u ;
	<span class="hljs-keyword">this</span>.e[i][j][<span class="hljs-number">1</span>] = v ;
	<span class="hljs-keyword">this</span>.e[i][j][<span class="hljs-number">2</span>] = w ;

	<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.e[i][j] ;

} ;</div></div></div><div class="segment"><div class="comments doc-section"><div class="wrapper"><p>O(1)</p>
<p>Parameters:</p>
<ul>
<li><strong>e must be an edge.</strong><br/>(is an edge reference)</li>
</ul></div></div><div class="code"><div class="wrapper">References.prototype.edel = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> e </span>) </span>{

	<span class="hljs-keyword">var</span> i = e[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] , j = e[<span class="hljs-number">1</span>][<span class="hljs-number">0</span>] ;

	<span class="hljs-keyword">this</span>.e[i][j][<span class="hljs-number">0</span>] = <span class="hljs-literal">null</span> ;
	<span class="hljs-keyword">this</span>.e[i][j][<span class="hljs-number">1</span>] = <span class="hljs-literal">null</span> ;
	<span class="hljs-keyword">this</span>.e[i][j][<span class="hljs-number">2</span>] = -<span class="hljs-number">1</span> ;

} ;</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>O(n)</p></div></div><div class="code"><div class="wrapper">References.prototype.vitr = <span class="hljs-function"><span class="hljs-keyword">function</span>* (<span class="hljs-params"> </span>) </span>{

	<span class="hljs-keyword">yield</span>* <span class="hljs-keyword">this</span>.v ;

} ;</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>O(n)</p></div></div><div class="code"><div class="wrapper">References.prototype.eitr = <span class="hljs-function"><span class="hljs-keyword">function</span>* (<span class="hljs-params"> v </span>) </span>{

	<span class="hljs-keyword">const</span> i = v[<span class="hljs-number">0</span>] ;

	<span class="hljs-keyword">for</span> ( <span class="hljs-keyword">let</span> e <span class="hljs-keyword">of</span> <span class="hljs-keyword">this</span>.e[i] ) {

		<span class="hljs-keyword">if</span> ( e[<span class="hljs-number">0</span>] === <span class="hljs-literal">null</span> ) <span class="hljs-keyword">continue</span> ;

		<span class="hljs-keyword">yield</span> e ;

	}

} ;

References.prototype.in  = References.prototype.eitr ;
References.prototype.out = References.prototype.eitr ;</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>O(n)</p></div></div><div class="code"><div class="wrapper">References.prototype.nitr = <span class="hljs-function"><span class="hljs-keyword">function</span>* (<span class="hljs-params"> v </span>) </span>{

	<span class="hljs-keyword">const</span> i = v[<span class="hljs-number">0</span>] ;

	<span class="hljs-keyword">for</span> ( <span class="hljs-keyword">let</span> e <span class="hljs-keyword">of</span> <span class="hljs-keyword">this</span>.e[i] ) {

		<span class="hljs-keyword">if</span> ( e[<span class="hljs-number">0</span>] === <span class="hljs-literal">null</span> ) <span class="hljs-keyword">continue</span> ;

		<span class="hljs-keyword">yield</span> e[<span class="hljs-number">0</span>] === v ? e[<span class="hljs-number">1</span>] : e[<span class="hljs-number">0</span>] ;

	}

} ;</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>O(n²)</p></div></div><div class="code"><div class="wrapper">References.prototype.aeitr = <span class="hljs-function"><span class="hljs-keyword">function</span>* (<span class="hljs-params"> </span>) </span>{

	<span class="hljs-keyword">const</span> len = <span class="hljs-keyword">this</span>.v.length ;

	<span class="hljs-keyword">for</span> ( <span class="hljs-keyword">let</span> v <span class="hljs-keyword">of</span> <span class="hljs-keyword">this</span>.v ) {

		<span class="hljs-keyword">const</span> i = v[<span class="hljs-number">0</span>] ;
		<span class="hljs-keyword">const</span> _e = <span class="hljs-keyword">this</span>.e[i] ;

		<span class="hljs-keyword">for</span> ( <span class="hljs-keyword">let</span> j = i ; j &lt; len ; ++j ) {

			<span class="hljs-keyword">const</span> e = _e[j] ;

			<span class="hljs-keyword">if</span> ( e[<span class="hljs-number">0</span>] === <span class="hljs-literal">null</span> ) <span class="hljs-keyword">continue</span> ;

			<span class="hljs-keyword">yield</span> e ;

		}

	}

} ;

exports.References = References ;</div></div></div></div></body></html>